import { btnFunctions } from "./btnFunctions";
import { Project } from "./project"; 
import { Todo } from "./todo";
import { Todos } from "./todo";


const UI = (() => {
    const {dialogControl, buttonControl} = btnFunctions(); 
    //project button and dialog
    const btnOpenAddProject = document.querySelector('.btn-open-add-project');
    const btnCloseProject = document.querySelector('.btn-close-project');
    const btnAddProject = document.querySelector('.btn-add-project');
    const dialogAddProject = document.querySelector('.dialog-add-project');
    //add task button 
    const btnOpenAddTask = document.querySelector('.btn-open-add-task')
    const btnCloseTask = document.querySelector('.btn-close-task')
    const dialogAddTask = document.querySelector('.dialog-add-task');
    const btnAddTask = document.querySelector('.btn-add-task');

    //all buttons
    const btnProject = document.querySelectorAll('.btn-project');


    function btnClicks (){
        //open dialog project
        buttonControl(btnOpenAddProject).onClick(() => {
            dialogControl(dialogAddProject).open();
        });
        //add project
        buttonControl(btnAddProject).onClick(Project.addProject);
      

        //close dialog project
        buttonControl(btnCloseProject).onClick(() => {
            dialogControl(dialogAddProject).close();
        });
        //open dialog task
        buttonControl(btnOpenAddTask).onClick(() => {
            dialogControl(dialogAddTask).open();
        });
        //close dialog task
        buttonControl(btnCloseTask).onClick(() => {
            dialogControl(dialogAddTask).close();
        });

        //add to do in the array and webpage
        buttonControl(btnAddTask).onClick(Todo.addTodo)


        document.addEventListener('click', (e) => {
            if (e.target.matches('.btn-project')) {
                const btnProject = document.querySelectorAll('.btn-project'); // <-- moved inside
                console.log(btnProject); // Logs all current buttons each time
                Todos.loadTodo()
            }
        });


        // const btnProject = document.querySelectorAll('.btn-project');

        // document.addEventListener('click', (e) => {
        //     // const projectBtn = document.querySelectorAll('.btn-project');
        //     const allTasks = Todo.getTodo()
        //     const matchingTasksArray = []
        //     // const title = Todos.get
        //     console.log(allTasks)
        
        //     const selectedProject = e.target.innerText;
        //     const matchingTasks = allTasks.filter(task => task.getProject() == selectedProject);
        //     console.log (matchingTasks);
        //     matchingTasksArray.push(matchingTasks);

        //     console.log(matchingTasksArray)
        //     matchingTasksArray.get
        //     // Todo.renderTodo(matchingTasksArray);

        //     // Todo.renderTodo(matchingTasks);
        // 
    }

    return {
        btnClicks,
    };
})();

export { UI } 